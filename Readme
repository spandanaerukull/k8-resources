# In k8 first thing is we need to create the cluster using eksctl tool
# Requriments for creating the cluster
# 1. docker should be installed in your system
# 2. eksctl should be installed in your system
# 3. kubectl should be installed in your system
# 4. aws configuration should be done in your system

docker_installation_commands: |
  sudo dnf -y install dnf-plugins-core
  sudo dnf config-manager --add-repo https://download.docker.com/linux/rhel/docker-ce.repo
  sudo dnf install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
  sudo systemctl start docker
  sudo systemctl enable docker
  sudo systemctl status docker # to check docker status

  aw configuration commands: |
  aws configure # this command is used for configuring aws --client
  # it will ask for aws access key, secret key, region and output format
  # you can get the access key and secret key from aws iam service
  # region can be us-east-1
  

eks_cluster_creation_commands: |
  ARCH=amd64
  PLATFORM=$(uname -s)_$ARCH

  curl -sLO "https://github.com/eksctl-io/eksctl/releases/latest/download/eksctl_$PLATFORM.tar.gz"

  # (Optional) Verify checksum
  curl -sL "https://github.com/eksctl-io/eksctl/releases/latest/download/eksctl_checksums.txt" | grep $PLATFORM | sha256sum --check

  tar -xzf eksctl_$PLATFORM.tar.gz -C /tmp && rm eksctl_$PLATFORM.tar.gz

  sudo install -m 0755 /tmp/eksctl /usr/local/bin && rm /tmp/eksctl

  eksctl create cluster -f eks.yaml # this command is used for creating the cluster

kubectl_installation_commands: |
  curl -O https://s3.us-west-2.amazonaws.com/amazon-eks/1.33.3/2025-08-03/bin/linux/amd64/kubectl
  chmod +x ./kubectl # make the kubectl binary executable
  sudo mv ./kubectl /usr/local/bin # move the kubectl binary to a directory in your PATH
  kubectl version --client # to check kubectl version